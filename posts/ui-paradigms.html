<!DOCTYPE html>
<html lang="en" dir="ltr">
<head profile="http://www.w3.org/2005/10/profile">
  <meta name="description" content="Yair&#39;s website">
  <meta name="author" content="Yair Chuchem">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@yairchu">
<meta name="twitter:creator" content="@yairchu">
<meta name="twitter:title" content="The revolution in UI paradigms (draft)">
  <meta name="twitter:description" content="The rise of declarative UI libraries">
  <meta name="twitter:image" content="https://yairchu.github.io//images/imgui.jpg">
  <title>The revolution in UI paradigms (draft)</title>
  <link rel="stylesheet" href="/css/syntax.css">
  <meta property="og:title" content="The revolution in UI paradigms (draft)" />
  <meta property="og:image" content="https://yairchu.github.io/images/imgui.jpg" />
  <meta charset="UTF-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/style.css">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3ZVL4J64MW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-3ZVL4J64MW');
  </script>
</head>
<body>
  <header dir="ltr">
      <nav>
          <a id="beacon" href="/">
              <div id="home-text"> HOME </div>
          </a>
      </nav>
  
      <div class="right-sidebar">
          <a class="ext-link" href="https://github.com/yairchu">
            <img src="/images/github-logo.png" alt="Github Profile"/>
        </a>

          <a class="ext-link" href="https://twitter.com/yairchu">
            <img src="/images/twitter-logo.png" alt="Twitter Profile"/>
        </a>
    <div id="theme-button">DAY</div>
      </div>
  </header>

<div id="page">
  <div class="wrapper">
    <div class="masthead">
      <span class="title">
        The revolution in UI paradigms (draft)
      </span>

      <img class="post-image" src="/images/imgui.jpg">
      <span class="byline">by Yair Chuchem</span>
      <span class="date">2021.08.26</span>
      <div class="metadata">
      </div>
      <div class="tags">
        <a href="/tag/code" class="tag">code</a>
        <a href="/tag/ui" class="tag">ui</a>
        <a href="/tag/declarative" class="tag">declarative</a>
        <a href="/tag/history" class="tag">history</a>
      </div>
    </div>
  </div>
  <article class="post">
    <p>For decades we've been developing GUIs using libraries which all worked in a similar way, until in 2013 Facebook unveiled <a href="https://reactjs.org">React</a>, which has started a revolution in the field. Apple and Google have followed suite and released their own modern UI libraries: SwiftUI and Flutter, which are clearly inspired by React.</p>
<p>In this post I'd like to describe what sets apart the modern libraries from traditional ones (like Qt, GTK, AppKit, Angular, FLTK, Kivy, JUCE, etc), and also trace back the origins of the modern approaches back to 2003 with the "Immediate Mode UI" paradigm (<a href="http://perso.univ-lyon1.fr/thierry.excoffier/ZMW/">ZMW</a>, <a href="https://github.com/ocornut/imgui">Dear Imgui</a>).</p>
<h2 id="traditional-gui-paradigm">Traditional GUI paradigm</h2>
<p>The traditional paradigm requires the programmer to write three pieces of code:</p>
<ul>
<li>A constructor function which creates UI widgets (aka views/components) corresponding to the program's model/document, and populates them with data.</li>
<li>Callbacks/listeners which are set up to respond to user actions and inputs coming via the UI widgets. These callbacks propagate the changes made by the user to the document.</li>
<li>Either the previous callbacks also maintain the UI (create widgets for new items, etc), or additional listeners on model updates are set up to update the UI when the document changes.</li>
</ul>
<p>The library can then draw the GUI and invoke the appropriate actions in response to user actions.</p>
<p>In this approach there are two structures (the document and the corresponding widgets) that we need to keep in sync. Experience has proved this synchronisation problem to be challenging and bug-prone.</p>
<h2 id="zero-memory-widgets--imgui">Zero Memory Widgets / Imgui</h2>
<p>In 2003 Thierry Excoffier published the <a href="http://perso.univ-lyon1.fr/thierry.excoffier/ZMW/">"Zero Memory Widgets"</a> research and GUI library, and in 2005 Casey Muratori published a video lecture on an equivalent approach which he called <a href="https://caseymuratori.com/blog_0001">"Immediate Mode GUI"</a>.</p>
<p>As the "zero-memory" term suggests, in this approach we do not maintain any in-memory structure of widgets. The document is the single source of truth. Instead of the library traversing its own structure of widgets, it traverses the document itself using a function provided by the programmer to map the document to a GUI at this moment. The GUI consists of two parts: how it looks, and what code to invoke in response to user events.</p>
<p>How can widgets consume "zero memory", or in other words, have no state? As in a UI there is no more than one "active widget" at a time (a widget where the user's cursor currently is), we only need to maintain the cursor and the editing state for a single widget at a time, so only the active widget does have state. Likewise, as one probably wants their application to open a document with the same scrollbar positions and window size as when the user saved it, even these values should be part of the document itself rather than being widgets-only state.</p>
<p>With this approach there is no duplication of structures, making it much simpler and less error-prone than the traditional approach. However, it may consume more CPU.</p>
<h2 id="the-rationale-behind-the-traditional-approach">The rationale behind the traditional approach</h2>
<p>If Imgui is so simple, why did libraries from major companies like Apple, Microsoft, and many others create a significanly more complicated solution?</p>
<p>The answer is that decades ago, computers were orders of magnitude slower than today. Programmers needed to program GUIs in the most efficient way possible rather than the simplest one.</p>
<p>The key benefit of the traditional approach was that it could minimize redrawing. When updating a UI element the widgets' state would maintain which parts would need to be redrawn and only their pixels on the screen were recomputed.</p>
<h2 id="reacts-challenge">React's challenge</h2>
<p>Suppose you would want to use the simple Imgui approach in a web-based UI. This would mean that you would need to reconstruct the visual appearance of the page on every change or cursor movement, and would not be able to reuse HTML's built-in UI elements which are stateful and work in the traditional way. Also, when doing all this in a relatively slow language like Javascript, your web app wouldn't be the fastest.</p>
<p>React solved this challenge by bridging between the two approaches: The user still creates a simple function producing a UI description (aka "virtual DOM") for a given model, but React then creates the standard widgets (aka DOM) from it. When the UI updates, Reacts compares the UI description to the previous one, and changes the widgets accordingly.</p>
<p>The developers of SwiftUI were in a similar situation: How to re-use the existing AppKit while providing a good experience similar to React. In their case, having more control on designing the programming language and compiler, they had the option to make something a little bit more efficient: The library can tell which widgets depend on which model data and only recompute those.</p>
<h2 id="disclaimer">Disclaimer</h2>
<p>I don't have experience with all the UI libraries mentioned above, there just isn't enough time to try them all. I did work with JUCE for about 10 years, FLTK and Qt about 2 years each, a little bit of GTK, AppKit, Kivy, and a also little bit of web-dev. In addition I've been using and developing <a href="https://github.com/lamdu/momentu">Momentu</a> along with Eyal Lotem for the development of <a href="http://www.lamdu.org">Lamdu</a>.</p>
<p>Due to my partial knowledge, you may very well find innaccuracies or missing key details in this post. Please feel free to send me feedback and corrections and I'll do my best to update it. Despite my knowledge gaps I felt compelled to write this post because I couldn't find any similar overview elsewhere.</p>
<h3 id="momentu">Momentu</h3>
<p>Momentu is a declarative/modern GUI library for Haskell with an emphasis of keyboard based editing, animations, and responsive layout features. It will be properly announced in a future post. Note that Eyal rediscovered the modern approach underlying its design independently in 2011, before React was released, as well as before we have heard about Imgui.</p>

    <br>
    <br>

    <!--Share buttons-->
    <div class="social-buttons">
      <a href="https://twitter.com/share" class="twitter-share-button" data-text="Check out: The revolution in UI paradigms (draft) - " data-via="yairchu">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      <a href="https://twitter.com/yairchu" class="twitter-follow-button" data-show-count="false" data-dnt="true">Follow @yairchu</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      <div class="fb-like" data-href="" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div>
    </div>
</article>

</div>

<footer>
    Web site built with Haskell using <a href="https://github.com/ChrisPenner/slick">slick</a> ❤️
</footer>

<link href='https://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<script src="/js/main.js"></script>
</body>
</html>

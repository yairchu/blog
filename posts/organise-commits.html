<!DOCTYPE html>
<html lang="en">
<head profile="http://www.w3.org/2005/10/profile">
  <meta name="description" content="Yair&#39;s website">
  <meta name="author" content="Yair Chuchem">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@yairchu">
<meta name="twitter:creator" content="@yairchu">
<meta name="twitter:title" content="How to organise your git commits">
  <meta name="twitter:description" content="Why and how to organise git commits">
  <meta name="twitter:image" content="https://yairchu.github.io//images/lego-business-man.jpg">
  <title>How to organise your git commits</title>
  <link rel="stylesheet" href="/css/syntax.css">
  <meta property="og:title" content="How to organise your git commits" />
  <meta property="og:image" content="https://yairchu.github.io/images/lego-business-man.jpg" />
  <meta charset="UTF-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/style.css">
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3ZVL4J64MW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-3ZVL4J64MW');
  </script>
</head>
<body>
  <header>
      <nav>
          <a id="beacon" href="/">
              <div id="home-text"> HOME </div>
          </a>
      </nav>
  
      <div class="right-sidebar">
          <a class="ext-link" href="https://github.com/yairchu">
            <img src="/images/github-logo.png" alt="Github Profile"/>
        </a>

          <a class="ext-link" href="https://twitter.com/yairchu">
            <img src="/images/twitter-logo.png" alt="Twitter Profile"/>
        </a>
    <div id="theme-button">DAY</div>
      </div>
  </header>

<div id="page">
  <div class="wrapper">
    <div class="masthead">
      <span class="title">
        How to organise your git commits
      </span>

      <img class="post-image" src="/images/lego-business-man.jpg">
      <span class="byline">by Yair Chuchem</span>
      <span class="date">2020.09.03</span>
      <div class="metadata">
      </div>
      <div class="tags">
        <a href="/tag/code" class="tag">code</a>
        <a href="/tag/git" class="tag">git</a>
      </div>
    </div>
  </div>
  <article class="post">
    <p>Suppose that in a fruitful day of work you:</p>
<ul>
<li>Fixed a bug</li>
<li>Changed some colors and text in the UI</li>
<li>Added a minor feature</li>
<li>Renamed some classes</li>
</ul>
<p>At the end of the day you may either push it all in one commit, or perhaps create a commit for each of those changes. In this post I'll argue that the latter choice is often better.</p>
<h2 id="the-benfits-of-separate-commits">The benfits of separate commits</h2>
<p>Let's examine how possible future tasks will be affected by keeping these changes in separate commits:</p>
<h3 id="reviewing-what-changed">Reviewing what changed</h3>
<p>If you make a PR, or someone wants to review these changes, it would be much easier to do with separate commits. They could quickly skim the rename commit which has lots of repeating boring changes, and they'll see all the bugfix's changes coherently grouped together. For the colors-change commit they may just have a glance on the new look and won't even need to examine its code representation.</p>
<h3 id="reverting-and-cherry-picking">Reverting and cherry-picking</h3>
<p>If later you discover that the minor feature is no longer desired, it would be easier to <code>git revert</code> it when it's a separate commit. Or if someone wants to grab only the bugfix change to the stable branch, they could easily <code>git cherry-pick</code> it when it's a separate commit.</p>
<h3 id="bisecting">Bisecting</h3>
<p>You may discover some bug in the future, and do a <code>git bisect</code> to find what change introduced it. With the commits separate, you'll get better more specific information when it pinpoints which commit introduced it.</p>
<h3 id="resolving-conflicts">Resolving conflicts</h3>
<p>When resolving merge conflicts in <a href="/posts/split-merge-to-smaller-pieces">the "small pieces" flow</a>, a lot less mental effort is involved when the changes are separated and explained in their commit messages. For example when resolving the conflicts resulting from the rename, sometimes just repeating <a href="https://github.com/da-x/git-search-replace">the <code>git-search-replace</code></a> followed <a href="/posts/git-mediate-stops-fear">by <code>git-mediate</code></a> will be enough to resolve them.</p>
<h3 id="code-archeology">Code archeology</h3>
<p>When trying to find where code originated using tools like <a href="https://www.syntevo.com/deepgit/">DeepGit</a> or <a href="https://magit.vc/">magit</a>, these tools are inteligent enough to recognize file renames and find the actual origin of the code before the rename. But if we mix too many changes together then their heuristics for recognizing renames may fail.</p>
<h2 id="how-to-make-the-commits-well-organised">How to make the commits well organised</h2>
<p>Example situation: You made the colors change, then the rename, and then did another color change.</p>
<p>One way to do things is to make a local commit after each change (one should use <code>git add -p</code> to make sure they're only adding the relevant changes to each commit). Doing this, after these changes you'll have three commits. Then before pushing, a <code>git rebase -i</code> can be used to squash the two color changes into one commit.</p>
<h2 id="conclusion">Conclusion</h2>
<p>It's good to split commits to coherent units, where renames are separate from bugfixes, etc. It's not only good when working in a team, but even when developing something alone. But note that there's no need to take it to the extreme and split them even further to microscopic commits (then just reviewing the list of commits will become tedious).</p>
<h2 id="notes">Notes</h2>
<ul>
<li>This isn't my own original concept, I'm just documenting it. From my experience this practice is moderately, but not universally, wide-spread.</li>
<li>Why did I write this: I wanted to explain this to a friend but I couldn't find any article in the Internet that I could send, so I wrote this one. Btw if you do know a good article on this topic, please direct me to it!</li>
<li>Image by <a href="https://pixabay.com/users/CapsandCapital-11428599/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4250499">Stu G</a> from <a href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=4250499">Pixabay</a></li>
</ul>

    <br>
    <br>

    <!--Share buttons-->
    <div class="social-buttons">
      <a href="https://twitter.com/share" class="twitter-share-button" data-text="Check out: How to organise your git commits - " data-via="yairchu">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      <a href="https://twitter.com/yairchu" class="twitter-follow-button" data-show-count="false" data-dnt="true">Follow @yairchu</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      <div class="fb-like" data-href="" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div>
    </div>
</article>

</div>

<footer>
    Web site built with Haskell using <a href="https://github.com/ChrisPenner/slick">slick</a> ❤️
</footer>

<link href='https://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<script src="/js/main.js"></script>
</body>
</html>
